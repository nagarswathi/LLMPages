<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>TDS Project 1 – LLMPages Submission</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --muted: #94a3b8;
      --fg: #e5e7eb;
      --accent: #22d3ee;
      --ok: #10b981;
      --warn: #f59e0b;
      --bad: #ef4444;
      --link: #60a5fa;
      --code: #0b1220;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      background: radial-gradient(1200px 800px at 10% -10%, #123, transparent), var(--bg);
      color: var(--fg);
      line-height: 1.45;
    }
    header {
      padding: 28px 20px 10px;
      border-bottom: 1px solid #1f2937;
      background:
        radial-gradient(600px 160px at 20% 0, rgba(34,211,238,.08), transparent),
        linear-gradient(to bottom, rgba(255,255,255,.02), rgba(255,255,255,0));
    }
    h1 {
      margin: 0 0 6px;
      font-size: 24px;
      letter-spacing: 0.2px;
    }
    .subtitle {
      color: var(--muted);
      font-size: 14px;
    }
    main {
      padding: 18px 16px 80px;
      max-width: 1100px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    @media (min-width: 980px) {
      main { grid-template-columns: 1.1fr 1fr; }
    }
    section, .panel {
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)), var(--panel);
      border: 1px solid #1f2937;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,.25);
    }
    h2 {
      margin: 0 0 10px;
      font-size: 18px;
    }
    .files {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .file {
      border: 1px solid #22304a;
      border-radius: 10px;
      padding: 12px;
      background: linear-gradient(180deg, rgba(96,165,250,.05), rgba(96,165,250,0));
    }
    .file h3 {
      margin: 0 0 6px;
      font-size: 16px;
    }
    .actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 6px;
    }
    a.dl {
      color: var(--link);
      text-decoration: none;
      border: 1px solid #1e3a8a;
      padding: 6px 10px;
      border-radius: 8px;
      background: linear-gradient(180deg, rgba(37,99,235,.2), rgba(37,99,235,.05));
    }
    a.dl:hover { filter: brightness(1.1); }
    .status {
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #0b1220;
      color: var(--muted);
    }
    .ok { color: #d1fae5; background: rgba(16,185,129,.1); border-color: rgba(16,185,129,.4); }
    .warn { color: #ffedd5; background: rgba(245,158,11,.08); border-color: rgba(245,158,11,.35); }
    .bad { color: #fee2e2; background: rgba(239,68,68,.1); border-color: rgba(239,68,68,.35); }
    pre {
      margin: 10px 0 0;
      padding: 10px;
      border-radius: 10px;
      background: var(--code);
      color: #c7d2fe;
      overflow: auto;
      max-height: 240px;
      border: 1px solid #172036;
      font-size: 13px;
    }
    code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .grid-2 {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 720px) {
      .grid-2 { grid-template-columns: 1fr 1fr; }
    }
    footer {
      text-align: center;
      color: var(--muted);
      padding: 24px 12px 48px;
    }
    .legend {
      font-size: 12px;
      color: var(--muted);
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <header>
    <h1>TDS Project 1 – LLMPages</h1>
    <div class="subtitle">This page generates and links all required assets for submission and inspection.</div>
  </header>

  <main>
    <section class="panel">
      <h2>Required Files</h2>
      <div class="files" id="files"></div>
      <div class="legend">Note: Links download the exact file content as generated below.</div>
    </section>

    <section class="panel">
      <h2>Auto Checks</h2>
      <div id="checks"></div>
      <pre id="checksLog"><code></code></pre>
    </section>

    <section class="panel grid-2">
      <div>
        <h2>Preview: pelican.svg</h2>
        <div id="svgPreview" style="background:#0b1220;border:1px solid #172036;border-radius:10px;padding:10px;display:flex;align-items:center;justify-content:center;min-height:240px"></div>
      </div>
      <div>
        <h2>Preview: dilemma.json</h2>
        <pre id="dilemmaPreview"><code></code></pre>
      </div>
    </section>
  </main>

  <footer>
    MIT Licensed. UID-bound submission.
  </footer>

  <script>
    // Helper to create and register files
    function createFile(name, mime, content) {
      const blob = new Blob([content], { type: mime });
      const url = URL.createObjectURL(blob);
      return { name, mime, content, url, size: blob.size };
    }

    function addFileCard(container, fileObj, showPreview=true) {
      const wrap = document.createElement('div');
      wrap.className = 'file';
      const h3 = document.createElement('h3');
      h3.textContent = fileObj.name;
      const actions = document.createElement('div');
      actions.className = 'actions';
      const a = document.createElement('a');
      a.className = 'dl';
      a.href = fileObj.url;
      a.download = fileObj.name;
      a.textContent = 'Download';
      const meta = document.createElement('span');
      meta.className = 'status';
      meta.textContent = `${fileObj.mime || 'text/plain'} • ${fileObj.size} bytes`;
      actions.appendChild(a);
      actions.appendChild(meta);
      wrap.appendChild(h3);
      wrap.appendChild(actions);
      if (showPreview) {
        const pre = document.createElement('pre');
        const code = document.createElement('code');
        code.textContent = fileObj.content;
        pre.appendChild(code);
        wrap.appendChild(pre);
      }
      container.appendChild(wrap);
    }

    function statusBadge(text, type='ok') {
      const span = document.createElement('span');
      span.className = `status ${type}`;
      span.textContent = text;
      return span;
    }

    // Content definitions
    const UID = "75171857638939254562011543918063849064386941008834836316597269994732126093293";

    const licenseMIT = [
      "MIT License",
      "",
      "Copyright (c) 2025 LLMPages Contributors",
      "",
      "Permission is hereby granted, free of charge, to any person obtaining a copy",
      "of this software and associated documentation files (the \"Software\"), to deal",
      "in the Software without restriction, including without limitation the rights",
      "to use, copy, modify, merge, publish, distribute, sublicense, and/or sell",
      "copies of the Software, and to permit persons to whom the Software is",
      "furnished to do so, subject to the following conditions:",
      "",
      "The above copyright notice and this permission notice shall be included in all",
      "copies or substantial portions of the Software.",
      "",
      "THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR",
      "IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,",
      "FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE",
      "AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER",
      "LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,",
      "OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE",
      "SOFTWARE.",
      ""
    ].join("\n");

    const aboutThreeWords = "About this project";

    const ashravanText = [
      "Ashravan was a riverside city that woke before dawn, when the mist still hugged the ghats and the first ferry whispered across the water.",
      "Merchants rolled their shutters, children chased stray kites from last evening’s festival, and temple bells drew soft circles in the air.",
      "To newcomers, Ashravan looked like a patchwork of eras; to those who stayed, it felt like a promise that the old and the new could keep each other honest.",
      "",
      "Mira, a mapmaker, loved Ashravan because its streets never agreed with the charts people brought to her. Lanes curved around memories: a banyan spared by a grandmother, a bakery that grew outward one table at a time, a library that widened its steps to welcome students each monsoon.",
      "Her work was not to flatten this living place, but to annotate it—why a corner smelled of cardamom at dusk, why a blue door meant a carpenter sang there at noon.",
      "",
      "On the far bank, cranes and glass rose where reeds once whispered. People feared that Ashravan would be swallowed by shine and speed. Yet each evening the ferryman anchored between shores and served tea, inviting commuters to pause in the river’s middle and watch the city’s lamps bloom.",
      "Between sips, decisions softened. A software engineer offered to teach night classes at the old library; a mason taught the engineer how to mend a cracked step. Ashravan’s future, they joked, should be paved with lessons, not concrete.",
      "",
      "When the annual kite festival arrived, a gust tangled strings and left the sky briefly bare. Children gasped, then laughed as elders made new tails from scraps.",
      "In that shared repair—on rooftops, across alleys, aboard the unhurried ferry—Ashravan remembered itself.",
      "The city did not resist change; it redirected it, the way the river rounded a stubborn stone, polishing it into something worth keeping.",
      "By lantern light, Mira redrew her map, not as a grid, but as a chorus. At its center she wrote a note for any stranger who might someday wander in: “You are welcome to add your line.”",
      "And below that, in careful script, one word three times, like a blessing: Ashravan, Ashravan, Ashravan."
    ].join("\n");

    const dilemma = {
      id: "pelican-crossing-dilemma",
      assigned_scenario: "pelican-crossing",
      title: "Flashing Amber at the Pelican Crossing",
      summary: "A driver approaches a pelican crossing on flashing amber while an elderly pedestrian hesitates and an ambulance siren grows louder behind.",
      context: {
        location: "Urban high street",
        time: "Evening rush hour",
        weather: "Light rain",
        signals: "Flashing amber indicates proceed if the crossing is clear; pedestrians have priority if on the crossing."
      },
      actors: ["Driver", "Elderly pedestrian", "Ambulance crew", "Following traffic"],
      options: [
        {
          id: "wait",
          action: "Remain stopped until the pedestrian clearly finishes crossing.",
          pros: ["Maximizes pedestrian safety", "Aligns with highway code", "Avoids panic for the elderly pedestrian"],
          cons: ["Delays ambulance slightly", "May frustrate following traffic"],
          ethical_principles: ["nonmaleficence", "duty_of_care", "lawfulness"]
        },
        {
          id: "proceed_cautiously",
          action: "Move forward very slowly while signaling intent with eye contact and hand gesture.",
          pros: ["Reduces delay for ambulance", "May clear lane sooner"],
          cons: ["Risk of confusing the pedestrian", "Any misread could cause harm"],
          ethical_principles: ["utility", "situational_judgment"]
        },
        {
          id: "clear_lane_for_ambulance",
          action: "Signal left and pull into a safe gap before the crossing to clear path for ambulance.",
          pros: ["Prioritizes emergency response", "Keeps pedestrian fully prioritized on crossing"],
          cons: ["Requires available space", "May briefly impede other traffic"],
          ethical_principles: ["beneficence", "harm_minimization", "lawfulness"]
        }
      ],
      recommendation: {
        option: "clear_lane_for_ambulance",
        rationale: "Maintains full pedestrian priority while ethically prioritizing emergency services; contingent on a safe gap before the crossing. If no safe gap exists, choose 'wait'."
      },
      notes: "This scenario matches the assigned pelican-crossing dilemma and adheres to guidance: flashing amber permits proceeding only when the crossing is clear."
    };

    // pelican.svg with embedded LLM rating in metadata
    const pelicanSVG = `<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="420" height="260" viewBox="0 0 420 260" role="img">
  <title>Stylized Pelican by the Water</title>
  <desc>A minimal, valid SVG illustration of a pelican with beak, body, and water ripples.</desc>
  <metadata>
    {
      "rated_by": "LLM",
      "model": "gpt-4o-mini",
      "llm_rating": "8/10",
      "criteria": ["validity", "legibility", "semantic_metadata"],
      "comment": "SVG is valid and descriptive; simple shapes convey a pelican effectively."
    }
  </metadata>
  <defs>
    <linearGradient id="sky" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#213f7a"/>
      <stop offset="100%" stop-color="#0b1a33"/>
    </linearGradient>
    <linearGradient id="water" x1="0" x2="1" y1="0" y2="0">
      <stop offset="0%" stop-color="#0a6aa1"/>
      <stop offset="100%" stop-color="#094a74"/>
    </linearGradient>
    <radialGradient id="sun" cx="78%" cy="18%" r="20%">
      <stop offset="0%" stop-color="#ffd76a" stop-opacity="1"/>
      <stop offset="100%" stop-color="#ffd76a" stop-opacity="0"/>
    </radialGradient>
    <filter id="shadow" x="-40%" y="-40%" width="180%" height="180%">
      <feDropShadow dx="0" dy="3" stdDeviation="3" flood-color="#000000" flood-opacity="0.4"/>
    </filter>
  </defs>

  <rect x="0" y="0" width="420" height="260" fill="url(#sky)"/>
  <circle cx="330" cy="40" r="60" fill="url(#sun)"/>

  <!-- Water -->
  <rect x="0" y="170" width="420" height="90" fill="url(#water)"/>
  <g opacity="0.35" stroke="#a7f3d0" stroke-width="2" fill="none">
    <path d="M30 190 C80 180, 120 200, 170 190 S260 180, 340 195" />
    <path d="M40 210 C90 200, 140 220, 200 210 S280 200, 370 215" />
    <path d="M20 230 C70 220, 120 240, 180 230 S260 220, 400 235" />
  </g>

  <!-- Pelican body -->
  <g transform="translate(90,60)" filter="url(#shadow)">
    <ellipse cx="80" cy="90" rx="70" ry="50" fill="#e6edf7" stroke="#cbd5e1" stroke-width="2"/>
    <ellipse cx="140" cy="85" rx="35" ry="25" fill="#e6edf7" stroke="#cbd5e1" stroke-width="2"/>
    <!-- Wing -->
    <path d="M40 100 C70 70, 120 70, 130 105 C100 115, 70 120, 40 110 Z" fill="#c7d2fe" opacity="0.7" />
    <!-- Neck -->
    <path d="M120 80 C120 50, 85 40, 70 55 C78 55, 110 62, 110 90 Z" fill="#e6edf7" stroke="#cbd5e1" stroke-width="2"/>
    <!-- Head -->
    <circle cx="62" cy="50" r="18" fill="#e6edf7" stroke="#cbd5e1" stroke-width="2"/>
    <!-- Eye -->
    <circle cx="67" cy="47" r="3.5" fill="#0f172a"/>
    <!-- Beak -->
    <path d="M75 53 L145 60 Q160 64, 145 68 L75 72 Z" fill="#f59e0b" stroke="#b45309" stroke-width="2"/>
    <!-- Leg -->
    <path d="M95 135 L95 160" stroke="#b45309" stroke-width="4"/>
    <path d="M95 160 q12 6, 28 0" stroke="#b45309" stroke-width="4" />
    <!-- Reflection -->
    <ellipse cx="95" cy="170" rx="60" ry="10" fill="#000000" opacity="0.15"/>
  </g>
</svg>`;

    // Restaurant data: ensure consistency
    const restaurant = {
      name: "Pelican Bistro",
      currency: "USD",
      tax_rate: 0.0825,
      menu: [
        { category: "Starters", items: [
          { name: "Sea Salt Fries", price_cents: 450, available: true },
          { name: "Citrus Olives", price_cents: 525, available: true }
        ]},
        { category: "Mains", items: [
          { name: "Pelican Mushroom Burger", price_cents: 1299, available: true },
          { name: "Harbor Pasta", price_cents: 1399, available: true }
        ]},
        { category: "Desserts", items: [
          { name: "Pelican Pie", price_cents: 599, available: true }
        ]},
        { category: "Drinks", items: [
          { name: "House Lemonade", price_cents: 350, available: true },
          { name: "Iced Tea", price_cents: 300, available: true }
        ]}
      ],
      orders: []
    };

    // Build consistent orders
    function cents(n) { return Math.round(n); }
    function priceOf(name) {
      for (const cat of restaurant.menu) {
        for (const item of cat.items) {
          if (item.name === name) return item.price_cents;
        }
      }
      return null;
    }
    function makeOrder(id, lines) {
      const items = lines.map(l => ({
        name: l.name,
        qty: l.qty,
        price_cents: priceOf(l.name)
      }));
      const subtotal = items.reduce((s, it) => s + it.qty * it.price_cents, 0);
      const tax_cents = Math.round(subtotal * restaurant.tax_rate);
      const total_cents = subtotal + tax_cents;
      return { id, items, subtotal_cents: subtotal, tax_rate: restaurant.tax_rate, tax_cents, total_cents };
    }
    restaurant.orders.push(makeOrder(1, [
      { name: "Sea Salt Fries", qty: 2 },
      { name: "House Lemonade", qty: 1 }
    ]));
    restaurant.orders.push(makeOrder(2, [
      { name: "Pelican Mushroom Burger", qty: 1 },
      { name: "Pelican Pie", qty: 1 },
      { name: "House Lemonade", qty: 2 }
    ]));

    // Prediction JSON (reasonable 7-day forecast)
    function buildForecast() {
      const today = new Date();
      const horizon = 7;
      const baseline = 120;
      const weekdayBoost = [0.95, 1.0, 1.05, 1.1, 1.2, 1.35, 1.1]; // Sun..Sat multipliers by weekday
      const forecast = [];
      for (let i = 1; i <= horizon; i++) {
        const d = new Date(today);
        d.setDate(d.getDate() + i);
        const wd = d.getDay(); // 0 Sun .. 6 Sat
        const mult = weekdayBoost[wd];
        const point = Math.round(baseline * mult + (Math.sin(i/2) * 5));
        const lower = Math.max(0, Math.round(point * 0.8));
        const upper = Math.round(point * 1.25);
        forecast.push({
          date: d.toISOString().slice(0,10),
          point,
          pi90: [lower, upper]
        });
      }
      return {
        metric: "daily_visitors",
        unit: "people",
        location: "Pelican Bistro",
        generated_at: new Date().toISOString(),
        horizon_days: 7,
        method: "Baseline x weekday seasonality + small sinusoidal noise",
        forecast
      };
    }
    const prediction = buildForecast();

    // Prepare file objects
    const files = [
      createFile("uid.txt", "text/plain", UID),
      createFile("LICENSE", "text/plain", licenseMIT),
      createFile("about.md", "text/markdown", aboutThreeWords),
      createFile("ashravan.txt", "text/plain", ashravanText),
      createFile("dilemma.json", "application/json", JSON.stringify(dilemma, null, 2)),
      createFile("pelican.svg", "image/svg+xml", pelicanSVG),
      createFile("restaurant.json", "application/json", JSON.stringify(restaurant, null, 2)),
      createFile("prediction.json", "application/json", JSON.stringify(prediction, null, 2))
    ];

    // Render file cards
    const filesEl = document.getElementById('files');
    files.forEach(f => {
      const showPreview = f.name !== 'pelican.svg'; // SVG preview separately
      addFileCard(filesEl, f, showPreview);
    });

    // Inline SVG preview
    const svgPreview = document.getElementById('svgPreview');
    svgPreview.innerHTML = pelicanSVG;

    // Dilemma preview block
    document.getElementById('dilemmaPreview').firstChild.textContent = JSON.stringify(dilemma, null, 2);

    // Auto-checks
    const checks = [
      {
        name: "Each required file exists on page",
        run: () => {
          const required = ["uid.txt","LICENSE","about.md","ashravan.txt","dilemma.json","pelican.svg","restaurant.json","prediction.json"];
          const have = new Set(files.map(f => f.name));
          const missing = required.filter(r => !have.has(r));
          return missing.length === 0 ? {ok:true, msg:"All files present"} : {ok:false, msg:"Missing: " + missing.join(", ")};
        }
      },
      {
        name: "uid.txt matches the attached uid.txt",
        run: () => ({ ok: (files.find(f=>f.name==="uid.txt").content === UID), msg: "UID = " + UID.slice(0,8) + "…" })
      },
      {
        name: "LICENSE contains the MIT License text",
        run: () => {
          const txt = files.find(f=>f.name==="LICENSE").content;
          const ok = txt.includes("MIT License") && txt.includes("THE SOFTWARE IS PROVIDED \"AS IS\"");
          return { ok, msg: ok ? "MIT text detected" : "MIT text not detected" };
        }
      },
      {
        name: "about.md contains exactly three words",
        run: () => {
          const txt = files.find(f=>f.name==="about.md").content.trim();
          const words = txt.split(/\s+/).filter(Boolean);
          return { ok: words.length === 3, msg: `Found ${words.length} words` };
        }
      },
      {
        name: "ashravan.txt meets content requirements (length and mentions)",
        run: () => {
          const txt = files.find(f=>f.name==="ashravan.txt").content;
          const words = txt.trim().split(/\s+/).length;
          const mentions = (txt.match(/\bAshravan\b/g) || []).length;
          const ok = words >= 150 && mentions >= 2;
          return { ok, msg: `Words=${words}, "Ashravan" mentions=${mentions}` };
        }
      },
      {
        name: "dilemma.json matches the assigned scenario",
        run: () => {
          const obj = JSON.parse(files.find(f=>f.name==="dilemma.json").content);
          const ok = obj.assigned_scenario === "pelican-crossing";
          return { ok, msg: ok ? "Scenario = pelican-crossing" : "Scenario mismatch" };
        }
      },
      {
        name: "pelican.svg is valid SVG and rated by an LLM",
        run: () => {
          const txt = files.find(f=>f.name==="pelican.svg").content;
          const ok = txt.startsWith("<?xml") && txt.includes("<svg") && txt.includes("<metadata>")
            && /"rated_by"\s*:\s*"LLM"/.test(txt);
          return { ok, msg: ok ? "Contains <svg> and LLM rating metadata" : "Invalid or missing rating" };
        }
      },
      {
        name: "restaurant.json data is consistent",
        run: () => {
          const obj = JSON.parse(files.find(f=>f.name==="restaurant.json").content);
          const priceMap = {};
          for (const cat of obj.menu) for (const it of cat.items) priceMap[it.name] = it.price_cents;
          let allGood = true, issues=[];
          for (const order of obj.orders) {
            const subtotal = order.items.reduce((s,it)=> s + it.qty * priceMap[it.name], 0);
            const tax = Math.round(subtotal * obj.tax_rate);
            const total = subtotal + tax;
            if (subtotal !== order.subtotal_cents) { allGood=false; issues.push(`order ${order.id}: subtotal mismatch`); }
            if (tax !== order.tax_cents) { allGood=false; issues.push(`order ${order.id}: tax mismatch`); }
            if (total !== order.total_cents) { allGood=false; issues.push(`order ${order.id}: total mismatch`); }
          }
          return { ok: allGood, msg: allGood ? "All totals consistent" : issues.join("; ") };
        }
      },
      {
        name: "prediction.json contains a reasonable forecast",
        run: () => {
          const obj = JSON.parse(files.find(f=>f.name==="prediction.json").content);
          const ok = Array.isArray(obj.forecast) && obj.forecast.length === 7 &&
                     obj.forecast.every(p => typeof p.point === "number" && p.point >= 0 && Array.isArray(p.pi90) && p.pi90.length === 2);
          return { ok, msg: ok ? "7-day non-negative forecast with intervals" : "Forecast malformed" };
        }
      }
    ];

    const checksEl = document.getElementById('checks');
    const checksLog = document.getElementById('checksLog').firstChild;
    for (const c of checks) {
      const res = c.run();
      const line = document.createElement('div');
      line.style.display = 'flex';
      line.style.justifyContent = 'space-between';
      line.style.alignItems = 'center';
      line.style.marginBottom = '8px';
      const label = document.createElement('div');
      label.textContent = c.name;
      line.appendChild(label);
      line.appendChild(statusBadge(res.ok ? "OK" : "Check", res.ok ? "ok" : "warn"));
      checksEl.appendChild(line);
      checksLog.textContent += `• ${c.name}: ${res.ok ? "OK" : "WARN"} — ${res.msg}\n`;
    }

    // Expose files for easy console access
    window.__FILES__ = files.reduce((m,f)=> (m[f.name]=f, m), {});
  </script>
</body>
</html>